### 복습 문제
```sql
-- Ex1  emp 테이블에서 job 데이터 중복없이 조회 
select distinct * from emp 
-- Ex2
-- 조회할 테이블은 EMP 테이블이며 모든 열을 출력하시오.
-- 별칭 (AS)
-- EMPNO → EMPLOYEE_NO,
-- ENAME → EMPLOYEE_NAME,
-- MGR → MANAGER,
-- SAL → SALARY,
-- COMM → COMMISSION,
-- DEPTNO → DEPARTMENT_NO

-- 부서번호를 기준으로 내림차순으로 정렬하되,
-- 부서번호가 같다면 사원이름을 기준으로 오름차순 정렬하시오.

select EMPNO EMPLOYEE_NO,  ENAME  EMPLOYEE_NAME,JOB, MGR MANAGER, HIREDATE, SAL SALARY, COMM COMMISSION , DEPTNO DEPARTMENT_NO from emp
order by MGR desc, ENAME asc;

-- select
-- from
-- where
-- order by

-- Ex3  
-- EMP테이블에서 대소비교연산자(<= , >= ) and 를 이용하여 sal 열이 2000이상 3000이하인인 행을 조회
 select * from emp where sal >= 2000 and sal <=3000;

-- Ex4  
--  EMP테이블에서 BETWEEN AND 를 이용하여 sal 열이 2000이상 3000이하인인 행을 조회
 select * from emp where sal between 2000 and 3000;
-- Ex5
-- EMP테이블에서 OR 를 이용하여 
-- JOB 열이 'MANAGER' ,'SALESMAN' , 'CLERK' 중 하나라도 포함되는 행을 조회
select * from emp where job='MANAGER' or job = 'SALESMAN' or job = 'CLERK';
 
-- Ex6
-- EMP테이블에서 IN 를 이용하여 
-- JOB 열이 'MANAGER' ,'SALESMAN' , 'CLERK' 중 하나라도 포함되는 행을 조회
-- from → where  → select  
select * from emp where job in ('MANAGER','SALESMAN','CLERK');

-- Ex7. EMP테이블에서 ENAME이 S로 시작하는 행
select * from emp where ename like 'S%';
 
-- Ex8. EMP테이블에서 ENAME의 두번째 글자가 L인 행을 조회
select * from emp where ename like '_L%';
 
-- Ex9. EMP테이블에서 ENAME에 AN이 포함되어 있는 행을 조회
select * from emp where ename like '%AM%';

```

### union
```sql 
-- #7. 집합 연산자 : union (중복제거하고 합집합), union all (중복 포함하고 합집합), minus (차집합), intersect(교집합)
---------------------------------------------
select *
from emp
where deptno =10
---------------------------------------------
union
---------------------------------------------
select *
from emp
where deptno =10;
---------------------------------------------

-- #8. union all (중복 포함하고 합집합)
---------------------------------------------
select *
from emp
where deptno =10
---------------------------------------------
union all
---------------------------------------------
select *
from emp
where deptno =10;
---------------------------------------------

-- #9.  minus (차집합)
---------------------------------------------
select *
from emp
---------------------------------------------
minus
---------------------------------------------
select *
from emp
where deptno =20;
---------------------------------------------

-- #10.  intersect(교집합)
---------------------------------------------
select *
from emp
---------------------------------------------
intersect
---------------------------------------------
select *
from emp
where deptno =20;
---------------------------------------------

-- Q030 UNION을 이용하여 DEPTNO가 10이거나, 20인 데이터의 EMPNO, ENAME, SAL, DEPTNO 열을 조회하시오.
select EMPNO, ENAME, SAL, DEPTNO from emp where deptno = 10 
union
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno=20;

-- Q031 에러가 나는 이유는?
--ORA-01789: query block has incorrect number of result columns     //ctrl + / 전체 주석
--
--https://docs.oracle.com/error-help/db/ora-01789/01789. 00000 -  "query block has incorrect number of result columns"
--*Cause:    All of the queries participating in a set expression do
--           not contain the same number of SELECT list columns.
--*Action:   Check that all the queries in the set expression have
--           the same number of SELECT list columns.
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno =10
union
select EMPNO,ENAME,SAL from emp where deptno = 20;
-- 열의 갯수가 달라서

-- Q032 에러가 나는 이유는? ★속성의 갯수와 자료형
--ORA-01790: expression must have same datatype as corresponding expression
--
--https://docs.oracle.com/error-help/db/ora-01790/01790. 00000 -  "expression must have same datatype as corresponding expression"
--*Cause:    A SELECT list item corresponds to a SELECT list item
--           with a different datatype in another query of the same set
--           expression.
--*Action:   Check that all corresponding SELECT list items have
--           the same datatypes. Use the TO_NUMBER, TO_CHAR, and TO_DATE
--           functions to do explicit data conversions.
--70행, 14열에서 오류 발생
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno =10
union
select EMPNO,DEPTNO,ENAME,SAL from emp where deptno = 20;
-- 자료형이 다를때 (★속성의 갯수와 자료형)

-- Q033 동작하는 이유는? ★속성의 갯수와 자료형
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno =10
union
select EMPNO,ENAME,DEPTNO,SAL from emp where deptno = 20;
-- 자료형이 다를때 (★속성의 갯수와 자료형) (순서는 무관하지만 속성의 갯수와 자료형은 맞춰야된다. 첫번째 함수로 순서 배정)

-- Q034 UNION과 UNION ALL의 차이는?
select EMPNO, ENAME, SAL, DEPTNO from emp where deptno = 10 
union 
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno=10;
-- Q035 UNION과 UNION ALL의 차이는?
select EMPNO, ENAME, SAL, DEPTNO from emp where deptno = 10 
union all
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno=10;
-- union은 중복제거 후 합집합 / union all 은 중복 허용 합집합

-- Q036 MINUS의 의미는?
select EMPNO,ENAME,SAL,DEPTNO from emp 
minus
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno = 10;

-- Q037 INTERSECT 의미는? 교집합
select EMPNO,ENAME,SAL,DEPTNO from emp
intersect
select EMPNO,ENAME,SAL,DEPTNO from emp where deptno = 10;

-- EX001 EMP테이블에서 ENAME이 S로 끝나는 사원데이터를 모두 조회하시오
select * from emp where ename like '%S';
-- EX002 EMP테이블에서 DEPTNO가 30인 사원 중 직책이(JOB)이 SALESMAN 인 사원의 EMPNO, ENAME, JOB, SAL, DEPTNO를 조회하시오
select EMPNO, ENAME, JOB, SAL, DEPTNO from emp where deptno =30 and job = 'SALESMAN';

-- EX003 집합연산자( UNION을 )를 사용하지 않은 방식 
-- EMP테이블에서 IN 연산자를 이용하여 DEPTNO 가 20 또는 30인 사원의 SAL이 2000 초과인 사원을 조회하시오
select EMPNO, ENAME, JOB, SAL, DEPTNO from emp where deptno in (20,30) and sal > 2000;

--EX003 집합연산자( UNION을 )를 사용한 방식
--EMP테이블에서 IN 연산자를 이용하여 DEPTNO 가 20 또는 30인 사원의 SAL이 2000 초과인 사원을 조회하시오
select EMPNO, ENAME, JOB, SAL, DEPTNO from emp where deptno in (20) and sal >2000
union all
select EMPNO, ENAME, JOB, SAL, DEPTNO from emp where deptno in (30) and sal > 2000;

-- EX004 EMP테이블에서 NOT BETWEEN AND 연산자를 사용하지 않고 SAL이 2000이상 3000이하의 값을 가진 데이터만 조회하시오.
select * from emp where sal < 2000 or sal > 3000;

-- EX005 EMP테이블에서 ENAME에 E가 포함되고 DEPTNO가 30인 사원의 급여가 1000~2000사이가 아닌 사원의 ENAME, EMPNO, SAL, DEPTNO 를 조회하시오
select  ENAME, JOB, SAL, DEPTNO from emp where deptno = 30 and ename like '%E%' AND sal not between 1000 and 2000;

-- EX006 EMP테이블에서 COMM 이 없고 , MGR은 존재하면 JOB 이 'MANAGER', 'CLERK' 인 사원 중 사원의 이름2번째 글자기 L 이 아닌 사원의 정보를 조회하시오.
select * from emp where comm is null and mgr is not null and job in ('MANAGER','CLERK') and ename not like '_L%';

select * from emp where comm is null and mgr is not null and (job = 'MANAGER' or job = 'CLERK') and ename not like '_L%';

```

### 문자열
```sql 
------------------------------------------------------------------
-- 003_select_function.sql
-- 1. 문자열
-- 2. 숫자
-- 3. 날짜
-- 4. 변환
-- 5. 조건
------------------------------------------------------------------
-- 1. 문자열
-- 1-1) upper 대문자 , lower 소문자, initcap 첫글자만 대소문자 변환
-- 1-2) length 문자열 길이 , lengthb 문자열 바이트 수
-- 1-3) substr 부분문자열, instr 위치문자열
-- 1-4) replace 바꾸기, lpad, rpad [123**]채우기
-- 1-5) trim, ltrim, rtrim 공백빼기
-- 1-6) concat 문자열 연결

-- #1. 대소문자
select ename, upper(ename), lower(ename), initcap(ename)
from emp;

-- #2. 문자열 길이
select ename, length(ename), '킹', length('킹'), lengthb('킹')
from emp;

-- #3. substr(문자열,어디서부터,몇개) 부분문자열, instr 위치문자열
select ename, substr(ename, 1,2), substr(ename,1,3), substr(ename,2,2), substr(ename,3,2), substr(ename,-3,2), substr(ename,-2,2) from emp; -- (어느객체,몇번째 부터, 뒤로 몇개 까지) 
select substr('oracle',-1),                         substr('oracle',-3),            substr('oracle',-3,2),substr('oracle',-2) from dual;
--           e 뒤에서 1번째부터 끝까지              cle 뒤에서 3번째부터 끝까지             cl 뒤에서 3번째부터 2개

select instr('oracle','a') from dual;      -- 3 / o(1) r(2) a(3) c(4) l(5) e(6)
select ename, instr(ename, 'A') from emp;   -- 있으면 위치, 없으면 0

-- #4. replace 바꾸기, lpad, rpad [123**]채우기
select replace('010-1234-5678','-',' ') from dual;  -- replace(어떤문자열을, 찾아서, 바꾸기)
select lpad('oracle',10,'#') from dual;             -- l (left 채우기, 남은 공간만큼)
select rpad('oracle',10,'#') from dual;             -- r (right 채우기, 남은 공간만큼)

-- #5. trim, ltrim, rtrim 공백빼기
select trim(' *oracle* '), ltrim(' *oracle* '), rtrim(' *oracle* ') from dual;

-- #6. concat 문자열 연결 - 두개의 문자열만 연결 가능
select concat('hello', 'oracle') from dual;
-- select concat('hello', 'oracle','★') from dual;  --두개의 문자열만 연결 가능
select concat (concat('hello','oracle') , '★') from dual; -- concat 중첩으로는 사용 가능

select 'hello' || 'oracle' || '★' from dual;

------------------------------------------------------------------
-- ##1. 문자열 연습문제 (1~18)

-- 1. EMP 테이블에서 ENAME을 대문자, 소문자, 첫글자만 대문자로 조회하시오.
select ename, upper(ename), lower(ename), initcap(ename) from emp;

-- 2. EMP 테이블에서 UPPER를 이용하여 ENAME이 KING인 데이터를 조회하시오.
select ename from emp where ename = upper('king');

-- 3. EMP 테이블에서 UPPER를 이용하여 ENAME에 KING인 포함된 데이터를 조회하시오.
select ename from emp where upper(ename) like upper('%king%');
select ename from emp where ename = upper('king') or ename = lower('king');

-- 4. EMP 테이블에서 LENGTH를 이용하여 ENAME의 문자열 길이를 조회하시오.
select ename, length(ename) from emp;

-- 5. EMP 테이블에서 ENAME의 문자열 길이가 5이상인 데이터를 조회하시오.
select ename, length(ename) from emp where length(ename)>=5;

-- 6. 문자열길이반환, 문자열 바이트 수 반환환
select length('한글'),lengthb('한글') from dual;

-- 7. 문자열 일부분을 추출
select job, substr(job,1,2),substr(job,3,2),substr(job,5) from emp;

--  8. -의 의미는?
select job, substr(job,-length(job)),substr(job,-length(job),2),substr(job,-3) from emp; -- 뒤에서부터 몇번째

-- 9. 특정문자위치 찾기
select instr('ABCDEFGHIJKLMN','C'),instr('ABCDEFGHIJKLMN','L'),instr('ABCDEFGHIJKLMN','D') from dual;
SELECT INSTR('hello world', 'o', 1, 2) FROM dual;       --어디에서,어떤 문자를, 에서 부터, 몇번째(중복갯수)


-- 10. EMP테이블에서 INSTR 함수로 사원이름에 S가 있는 데이터를 조회하시오
select * from emp where instr(ename,'S') != 0;

-- 11. EMP테이블에서 LIKE를 이용하여 사원이름에 S가 있는 데이터를 조회하시오
select * from emp where ename like '%S%';

-- 12. REPLACE를 이용하여 연락처의 -을 공백으로, -을 뺀데이터로 조회하시오오 
select REPLACE('010-1234-5678','-','-') , replace('010-1234-5678','-',' '), replace('010-1234-5678','-','') from dual;

-- 13. LPAD, RPAD를 이용하여 다음과 같이 데이터를 출력하시오오
select 'oracle', lpad('oracle',10,'#'), rpad('oracle',10,'*'), lpad('oracle',10), rpad('oracle',10) from dual; 

-- 14. RPAD를 이용하여 개인정보뒷자리 *로 출력하시오.
select rpad('911225-',14,'*'),rpad('010-1234-',14,'*')  from dual;

-- 15. EMP 테이블에서 EMPNO와 ENAME 사이에 :을 넣고 문자열을 연결하시오. ?? 하나만 나오는게 맞아?
select concat(empno,ename) ,concat(empno,concat(':',ename)) from emp where ename = 'SCOTT';

-- 16. TRIM을 이용하여 다음과 같이 공백을 제거하고 출력하시오.
select '   [__oracle__]   ',ltrim('   [__oracle__]   '),rtrim('   [__oracle__]   '),trim('   [__oracle__]   ') from dual;
select
'[' || trim(' * *oracle* * ') || ']' as trim       -- 양쪽 공백 제거
, '[' || ltrim(' * *oracle* * ') || ']' as trim    -- 왼쪽 공백 제거
, '[' || rtrim(' * *oracle* * ') || ']' as trim    -- 오른쪽 공백 제거
, '[' || trim(' * *oracle* * ') || ']' as trim     -- 양쪽 공백 제거
from dual;

-- TRIM을 이용하여 다음과 같이 공백을 제거하고 출력하시오.
select
   '[' ||  trim(' * *Oracle* * ') || ']' as trim  -- 양쪽공백제거 (중간에 있는공백은 제거하지 않음)
,  '[' ||  trim( LEADING   FROM   ' * *Oracle* * ') || ']' as trim --  앞쪽공백제거
,  '[' ||  trim( TRAILING  FROM   ' * *Oracle* * ') || ']' as trim   --  뒤쪽공백제거
,  '[' ||  trim( BOTH      FROM   ' * *Oracle* * ') || ']' as trim  -- 양쪽공백제거
from   dual;

-- 17. TRIM을 이용하여 삭제할 문자 삭제후 출력가능능    
select ' [_ _oracle_ _] ',ltrim(replace(' [_ _oracle_ _] ',' ','*')),rtrim(replace(' [_ _oracle_ _] ',' ','*')),trim(replace(' [_ _oracle_ _] ',' ','*')) from dual;

-- ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★ 이게 표쥰이래....
select
'[' ||  trim(' * *Oracle* * ') || ']' as trim1
,  '[' ||  trim( LEADING  '*'  FROM   '* *Oracle* *') || ']' as trim2   -- 원래는 공백을 찾지만 이렇게되면 공백이 아니라 *을 찾아 제거
,  '[' ||  trim( TRAILING '*' FROM   '* *Oracle* *') || ']' as trim3   
,  '[' ||  trim( BOTH   '*'   FROM   '* *Oracle* *') || ']' as trim4  
from   dual;
-- ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★

-- 18 TRIM, LTRIM, RTRIM 사용하여 문자열 출력하기기
select
'[' ||  trim('* *Oracle* *') || ']' as trim0  
,  '[' ||   ltrim(   '* *Oracle* *') || ']' as trim1   
,  '[' ||  ltrim(  '* *Oracle* *', '*') || ']' as trim2  
, '[' || rtrim('* *oracle* *') || ']' as trim1   
, '[' || rtrim('* *oracle* *', '*') || ']' as trim2 
from   dual;




```