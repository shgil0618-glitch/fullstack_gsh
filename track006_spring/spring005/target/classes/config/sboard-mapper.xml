<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thejoa703.dao.SboardDao">

	  <!-- 명시적 매핑 -->
	  <resultMap id="sboardMap" type="SboardDto">
	    <result property="id" column="ID"/>
	    <result property="appUserId" column="APP_USER_ID"/>
	    <result property="btitle"    column="BTITLE"/>
	    <result property="bcontent"  column="BCONTENT"/>
	    <result property="bpass"     column="BPASS"/>
	    <result property="bfile"     column="BFILE"/>
	    <result property="bhit"      column="BHIT"/>
	    <result property="bip" column="BIP"/>
	    <result property="createdAt" column="CREATED_AT"/>
	  </resultMap>

	<insert     id="insert"  parameterType="SboardDto">
	insert into sboard ( ID    , APP_USER_ID , BTITLE , BCONTENT , BPASS , BIP)  
	values (sboard1_seq.nextval ,#{appUserId}, #{btitle},#{bcontent},#{bpass}, #{bip})
	</insert>
	
	<insert     id="insert2"  parameterType="SboardDto">
	insert into sboard ( ID    , APP_USER_ID , BTITLE , BCONTENT , BPASS , BFILE , BIP)  
	values (sboard1_seq.nextval ,#{appUserId}, #{btitle},#{bcontent},#{bpass},  #{bfile, jdbcType=VARCHAR} , #{bip})
	</insert>
	
	<update     id="updateHit"   parameterType="int">
	update  sboard   set     bhit = bhit + 1    where   id=#{id}    
	</update>	
	
	<update     id="update"  parameterType="SboardDto">
	update  sboard  
	set     BTITLE=#{btitle} , BCONTENT=#{bcontent} 
	where   id=#{id}   and BPASS= #{bpass} 
	</update>

	<update     id="update2"  parameterType="SboardDto">
	update  sboard  
	set     BTITLE=#{btitle} , BCONTENT=#{bcontent} , BFILE=#{bfile, jdbcType=VARCHAR}
	where   id=#{id}   and BPASS= #{bpass} 
	</update>	
	
	
	<delete     id="delete"  parameterType="SboardDto">
	delete from sboard   where    id=#{id}   and BPASS= #{bpass}  
	</delete>
	
	<select    resultMap  ="sboardMap"  id="selectAll"><!--  resultType="Sboard1Dto"  --> 
	select * from sboard  order by id desc 
	</select>
	
	<select    resultMap  ="sboardMap"   id="select"  parameterType="int">
	select * from sboard where id=#{id}  
	</select>
	
	<!--  ajax - search	 -->
	<select   resultMap  ="sboardMap"   id="selectSearch" parameterType="java.util.HashMap"  >
	  select * from  sboard  where btitle   like #{search}
	</select>
	
</mapper>
