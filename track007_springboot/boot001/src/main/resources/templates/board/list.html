<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head lang="ko">
    <meta charset="UTF-8">
    <title>Board List</title>
</head>
<body>
<div layout:fragment="content">

    <!-- 알림 메시지 -->
    <div th:if="${success}"
         class="alert alert-info alert-dismissible fade show" role="alert">
        <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <h3 class="card-header mb-3">MBTI QUEST BOARD</h3>

    <!-- 검색 -->
    <form method="get" th:action="@{/board/list}" class="row g-2 mb-3">
        <div class="col-auto">
            <input type="text" name="keyword" class="form-control"
                   th:value="${keyword}" placeholder="검색어 입력">
        </div>
        <div class="col-auto">
            <button class="btn btn-primary">검색</button>
        </div>
    </form>

    <!-- 목록 -->
    <table class="table table-striped table-bordered table-hover">
        <thead>
        <tr>
            <th>NO</th>
            <th>TITLE</th>
            <th>NAME</th>
            <th>DATE</th>
            <th>HIT</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="dto, i : ${list}">
            <td th:text="${paging.listtotal - ((paging.current-1)*paging.onepagelist) - i.index}"></td>
            <td><a th:href="@{/board/detail(id=${dto.id})}" th:text="${dto.btitle}"></a></td>
            <td th:text="${dto.appUserId}"></td>
            <td th:text="${dto.createdAt}"></td>
            <td th:text="${dto.bhit}"></td>
        </tr>
        </tbody>
    </table>

    <!-- 페이징 -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">

            <!-- 이전 -->
            <li class="page-item" th:classappend="${paging.start == 1} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/board/list(keyword=${keyword}, pageNo=${paging.start - 1})}">
                    Previous
                </a>
            </li>

            <!-- 페이지 번호 -->
            <li class="page-item"
                th:each="p : ${#numbers.sequence(paging.start, paging.end)}"
                th:classappend="${p == paging.current} ? 'active'">
                <a class="page-link"
                   th:text="${p}"
                   th:href="@{/board/list(keyword=${keyword}, pageNo=${p})}">
                </a>
            </li>

            <!-- 다음 -->
            <li class="page-item" th:classappend="${paging.end == paging.pagetotal} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/board/list(keyword=${keyword}, pageNo=${paging.end + 1})}">
                    Next
                </a>
            </li>
        </ul>
    </nav>

    <p class="text-end mt-3">
        <a th:href="@{/board/write}" class="btn btn-primary">글쓰기</a>
    </p>

    <p class="text-end alert alert-primary">
        로그인을 하면 글쓰기 가능합니다.
    </p>

</div>
</body>
</html>
